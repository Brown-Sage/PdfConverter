<!DOCTYPE html>
   <html lang="en">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>JPG to PDF Converter</title>
   </head>
   <body>
       <h1>JPG to PDF Converter</h1>
       <input type="file" id="fileInput" accept="image/jpeg" multiple>
       <button onclick="convertFiles()">Convert</button>
       <div id="status"></div>

       <script>
       function convertFiles() {
           const fileInput = document.getElementById('fileInput');
           const status = document.getElementById('status');
           
           if (fileInput.files.length === 0) {
               status.textContent = 'Please select at least one JPG file.';
               return;
           }

           const formData = new FormData();
           for (let i = 0; i < fileInput.files.length; i++) {
               formData.append('file', fileInput.files[i]);
           }

           status.textContent = 'Converting...';

           fetch('/.netlify/functions/convert', {
               method: 'POST',
               body: formData
           })
           .then(response => {
               if (!response.ok) throw new Error('Server error');
               return response.blob();
           })
           .then(blob => {
               const url = URL.createObjectURL(blob);
               const a = document.createElement('a');
               a.href = url;
               a.download = 'converted.pdf';
               document.body.appendChild(a);
               a.click();
               document.body.removeChild(a);
               URL.revokeObjectURL(url);
               status.textContent = 'Conversion complete!';
           })
           .catch(error => {
               console.error('Error:', error);
               status.textContent = 'Conversion failed. Please try again.';
           });
       }
       </script>
   </body>
   </html>
